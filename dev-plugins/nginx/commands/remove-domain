#!/bin/bash
SERVICE_NAME="$1"
APP_NAME="$2"

if [ -z "$SERVICE_NAME" ] || [ -z "$APP_NAME" ]; then
    echo "Usage: gokku nginx:remove-domain <service> <app>"
    echo ""
    echo "Examples:"
    echo "  gokku nginx:remove-domain nginx-lb api"
    echo "  gokku nginx:remove-domain nginx-lb web"
    exit 1
fi

echo "-----> Removing domain for app '$APP_NAME'"

# Remove CNAME file
APP_DIR="/opt/gokku/apps/$APP_NAME"
CNAME_FILE="$APP_DIR/CNAME"

if [ -f "$CNAME_FILE" ]; then
    rm "$CNAME_FILE"
    echo "-----> Domain removed for app '$APP_NAME'"
else
    echo "-----> No domain configured for app '$APP_NAME'"
fi

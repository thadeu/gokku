#!/bin/bash
SERVICE_NAME="$1"

echo "Redis configuration for $SERVICE_NAME:"
echo "======================================"

# Source helper functions
source /opt/gokku/scripts/plugin-helpers.sh

# Check if container exists
if ! container_exists "$SERVICE_NAME"; then
    echo "Service '$SERVICE_NAME' not found"
    exit 1
fi

# Get configuration directory
CONFIG_DIR=$(get_service_config "$SERVICE_NAME" | grep -o '"config_dir":"[^"]*"' | cut -d'"' -f4)

if [ -f "$CONFIG_DIR/redis.conf" ]; then
    echo "Configuration file: $CONFIG_DIR/redis.conf"
    echo ""
    cat "$CONFIG_DIR/redis.conf"
else
    echo "Configuration file not found"
    exit 1
fi
